pipeline {
    agent any

    stages {

        
        stage('Download CCCCCookbooksss') {
            steps {
                
                git 'https://github.com/shubhu014/Jenkins-Chef-Demo.git'
                
            }
        }
        stage('Move recipe to required location') {
            steps {
                //sh 'chef generate cookbook Jenkins-Chef-trial'
                //sh 'sudo mkdir -p /home/ubuntu/chef-repo/cookbooks/Jenkins-Chef-trial'
                //sh 'sudo mv /var/lib/jenkins/workspace/Jenkins-Chef/Jenkins-Chef-trial /home/ubuntu/chef-repo/cookbooks/'
                sh 'sudo mv /var/lib/jenkins/workspace/Jenkins-Chef/recipes/default.rb /home/ubuntu/chef-repo/cookbooks/Jenkins-Chef-trial/recipes/'
           }
       }
       
          stage('Upload cookbook to chef server') {
            steps {
                sh "knife cookbook upload /home/ubuntu/chef-repo/Jenkins-Chef-trial"
           }
       }
       
        
        
        
        
    }
}
